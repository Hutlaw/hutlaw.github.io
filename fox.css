* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: radial-gradient(circle, #071039, #02040a);
  color: #eef2ff;
  font-family: "Segoe UI", Roboto, Arial, sans-serif;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  align-items: center;
  padding: 20px;
  position: relative;
}
header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}
header h1 { font-size: 1.4rem; letter-spacing: 0.6px; }
.header-right { display: flex; gap: 15px; align-items: center; }
#lives { font-weight: 700; color: #ffd166; text-shadow: 0 1px 0 #000; }
#counters { font-size: 0.95em; color: #cfe8ff; }
#game { display: flex; flex-direction: column; align-items: center; width: 100%; max-width: 980px; }
#board-wrapper { margin-bottom: 18px; }
#board {
  display: grid;
  gap: 6px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding: 8px;
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(3,6,20,0.6);
}
.cell {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 2px solid rgba(255,255,255,0.06);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background 0.18s, transform 0.18s, box-shadow 0.18s;
  width: 48px;
  height: 48px;
  position: relative;
  user-select: none;
  border-radius: 6px;
  overflow: visible;
}
.cell.fixed { background: rgba(255,255,255,0.06); cursor: default; color:#cfe8ff; font-weight:700; box-shadow: inset 0 -4px 12px rgba(0,0,0,0.35); }
.cell.flip { animation: cellFlip 0.45s ease; }
@keyframes cellFlip {
  0% { transform: rotateY(0); }
  50% { transform: rotateY(90deg); }
  100% { transform: rotateY(0); }
}
.cell.place-flash { animation: placeFlash 420ms ease; }
@keyframes placeFlash {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(120,220,255,0.0); }
  30% { transform: scale(1.06); box-shadow: 0 0 10px 6px rgba(120,220,255,0.12); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(120,220,255,0.0); }
}
.cell.highlight { background: rgba(255,0,0,0.45); border-color: red; box-shadow: 0 0 14px rgba(255,0,0,0.35); transform: scale(1.05); }
.cell.infected { box-shadow: inset 0 0 0 3px rgba(255,120,0,0.12); }
.infected-counter {
  position: absolute;
  bottom: 2px;
  right: 2px;
  background: rgba(0,0,0,0.6);
  padding: 1px 5px;
  border-radius: 4px;
  font-size: 0.63rem;
  color: #ffd9b3;
}
.special-label {
  font-size: 0.78rem;
  color: #111;
  background: #ffd166;
  padding: 2px 6px;
  border-radius: 6px;
  font-weight: 800;
  box-shadow: 0 2px 6px rgba(0,0,0,0.35);
}
.explosion {
  animation: burst 420ms ease forwards;
}
@keyframes burst {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,140,42,0.6); }
  50% { transform: scale(1.08); box-shadow: 0 0 22px 8px rgba(255,140,42,0.12); }
  100% { transform: scale(0.9); box-shadow: 0 0 40px 18px rgba(255,120,20,0.02); opacity:0; }
}
.spark {
  pointer-events: none;
}
.pulse-corrupt {
  animation: swirl 800ms ease forwards;
}
@keyframes swirl {
  0% { transform: rotate(0deg) scale(1); box-shadow: 0 0 0 0 rgba(130,80,200,0.15); }
  50% { transform: rotate(12deg) scale(1.04); box-shadow: 0 0 8px 8px rgba(130,80,200,0.12); }
  100% { transform: rotate(24deg) scale(0.95); box-shadow: 0 0 0 0 rgba(130,80,200,0); }
}
.clone-flash {
  animation: clonePop 420ms ease forwards;
}
@keyframes clonePop {
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(90,200,255,0.15); }
  50% { transform: scale(1.16); box-shadow: 0 0 24px 10px rgba(90,200,255,0.12); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(90,200,255,0); }
}
.clone-tracer {
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: radial-gradient(circle, #bff0ff, #4ec0ff);
  pointer-events: none;
  z-index: 60;
  transform: translate(-6px,-6px);
  transition: transform 360ms cubic-bezier(.2,.9,.25,1);
}
.virus-pulse {
  animation: virusPulse 900ms ease infinite;
}
@keyframes virusPulse {
  0% { box-shadow: 0 0 0 0 rgba(255,90,90,0.08); transform: scale(1); }
  50% { box-shadow: 0 0 16px 8px rgba(255,90,90,0.10); transform: scale(1.02); }
  100% { box-shadow: 0 0 0 0 rgba(255,90,90,0.00); transform: scale(1); }
}
.tile {
  width: 72px;
  height: 72px;
  background: linear-gradient(180deg,#222,#494949);
  border: 2px solid rgba(255,255,255,0.12);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  cursor: pointer;
  border-radius: 8px;
  transition: transform 0.15s, box-shadow 0.15s;
  position: relative;
}
.tile .back {
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg,#171717,#333);
  border-radius: 8px;
}
.tile.selected { outline: 3px solid rgba(255,214,0,0.5); transform: scale(1.02); }
#pool-area { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 8px; }
#pool-counters { margin-bottom: 6px; font-size: 0.95em; }
#pool { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin-bottom: 8px; max-width: 980px; }
#message { margin-top: 10px; font-size: 1rem; min-height: 24px; color:#ffd9d9; }
button {
  padding: 8px 14px;
  font-size: 0.95rem;
  border: none;
  background: #ffd166;
  color: #000;
  cursor: pointer;
  border-radius: 6px;
}
.modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 40;
}
.modal-content {
  background: linear-gradient(180deg,#0b0b0b,#111);
  padding: 18px;
  border-radius: 10px;
  width: 90%;
  max-width: 420px;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}
.modal-buttons { margin-top: 12px; display:flex; gap:10px; justify-content:center; }
.tut-table { border-collapse: collapse; margin-right: 12px; }
.tut-table td { width: 24px; height: 24px; border: 1px solid rgba(255,255,255,0.12); text-align: center; vertical-align: middle; font-size: 0.9rem; }
footer { width: 100%; padding: 10px; text-align: center; background: rgba(255,255,255,0.02); position: absolute; bottom: 0; left: 0; }
footer a { color: #daecff; text-decoration: none; margin: 0 6px; }
@media(max-width:900px){
  .cell { width: 40px; height: 40px; font-size: 1rem; }
  .tile { width: 60px; height: 60px; font-size: 1rem; }
  .tut-table td { width: 20px; height: 20px; font-size: 0.8rem; }
}
